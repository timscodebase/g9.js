var initial = {
    x1: 100,
    y1: 0,

    x2: -100,
    y2: 0,

    a1: 0,
    r1: 100,

    a2: 0,
    r2: 100,
}

function data2graphics(data, ctx){
    
    ctx.circle(data.x1,data.y1)
    ctx.circle(data.x2,data.y2)

    var dx = data.x1 - data.x2
    var dy = data.y1 - data.y2
    var d = Math.sqrt(dx*dx+dy*dy)

    var x1 = data.x1
    var y1 = data.y1
    var x2 = data.x2
    var y2 = data.y2

    dx += Math.cos(data.a1)*data.r1 - Math.cos(data.a2)*data.r2
    dy += Math.sin(data.a1)*data.r1 - Math.sin(data.a2)*data.r2

    var attenuation = Math.sqrt(dx*dx+dy*dy) / d
    var scale = 1
    var a1 = 0
    var a2 = 0

    for (var i = 0; i < 10; i++) {
    	ctx.circle(x1 += Math.cos(a1+=data.a1)*data.r1*scale, y1 += Math.sin(a1+=data.a1)*data.r1*scale, {affects: ['a1', 'r1']})
    	ctx.circle(x2 += Math.cos(a2+=data.a2)*data.r2*scale, y2 += Math.sin(a2+=data.a2)*data.r2*scale, {affects: ['a2', 'r2']})
    	scale *= attenuation
    }

}

function log(x, y){
    console.log(x,y)
}

var demo = new g9(initial, data2graphics, log)